<div class="chat-title text-center">
<h1>チャットサンプル</h1>
<% if user_signed_in? %>
  <h3><%= @chat_room.company.name %>とのチャットルーム</h3>
</div>
<div class="chat-field">
  <% if @chat_messages.present? %>
    <% @chat_messages.each do |m| %>
      <!-- メッセージがUserによるものだったら -->
      <% if m.is_user %>
        <!-- メッセージを右に寄せる -->
        <div class="right-message">
          <%= m.message %>
        </div>
      <!-- メッセージがShopによるものだったら -->
      <% else %>
        <!-- メッセージを左に寄せる -->
        <div class="left-message">
          <%= m.message %>
        </div>
      <% end %>
    <% end %>
    <% end %>
  </div>
<%#= form_with [@chat_message] do |f|  %>
<%#= form_for ChatMessage.new do |f| %>
<%#= form_with model: [@chat_room, @chat_message] do |form| %>
<%#= form_for(@chat_message) do  |form| %>
  <%#= form.text_field :message %>
  <%#= form.submit"メッセージを送る" %>
<%# end %>
  <%#= form_for [@chat_room, @chat_message] do |f| %>


  <div class="chatPage">
  <header class="header">

    <div class="chatPartner">
      <div class="chatPartner_img"><%= image_tag @chat_room.user.profile_photo.url(:thumb) %></div>
      <div class="chatPartner_name"><%= @chat_room.user.name %></div>
    </div>
  </header>
  <div class="container">
    <div class="messagesArea messages">
      <%#= render @chat_messages %>
      <%= render "chat_messages/chat_message" %>
    </div>
  </div>
  <form class="messageInputForm">
    <div class='container'>
      <input type="text" data-behavior="room_speaker" class="messageInputForm_input" placeholder="メッセージを入力...">
    </div>
  </form>
</div>
<% elsif company_signed_in?%>
  <h3><% @user.name %>とのチャットルーム</h3>

  <div class="chatPage">
  <header class="header">
  <%= link_to "", matching_index_path, class: "linkToMatching" %>
    <div class="chatPartner">
      <div class="chatPartner_img"><%= image_tag @chat_room_user.img_name.url(:thumb) %></div>
      <div class="chatPartner_name"><%= @chat_room_user.name %></div>
    </div>
  </header>
  <div class="container">
    <div class="messagesArea messages">
      <%= render @chat_messages %>
    </div>
  </div>
  <form class="messageInputForm">
    <div class='container'>
      <input type="text" data-behavior="room_speaker" class="messageInputForm_input" placeholder="メッセージを入力...">
    </div>
  </form>
</div>

<% end %>
